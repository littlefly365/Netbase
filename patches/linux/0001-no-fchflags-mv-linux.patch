--- mv.c.bak
+++ mv.c
@@ -355,10 +355,11 @@
 	}
 	if (fchmod(to_fd, sbp->st_mode))
 		warn("%s: set mode", to);
-
+	#if defined(__linux__) || defined(__GNU__)
+	#else
 	if (fchflags(to_fd, sbp->st_flags) && (errno != EOPNOTSUPP))
 		warn("%s: set flags (was: 0%07o)", to, sbp->st_flags);
-
+	#endif
 	if (close(to_fd)) {
 		warn("%s", to);
 		return (1);
